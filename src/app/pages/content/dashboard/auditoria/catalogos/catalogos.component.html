<section *ngIf="enProceso()">
    <div class="container-fluid">
        <div class="row justify-content-center" style="height: 60vh; width: 100%">
            <div class=" align-self-center">
                <div class="d-flex flex-column" style="width: 504px;">
                    <div class="descripcionPrimerLogin" style="margin-top:34px">
                        <div class="row">
                            <div class="col-10">
                                <img src="assets/icons/ico-residencial.png" width="30%" class="center">
                                <p>Esta página se encuentra en construcción.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section *ngIf="!enProceso()">
    <div class="card-busqueda">
        <div class="mt-4">Buscar por</div>
        <div style="
        text-align: right;
        width: 100%;
        justify-content: flex-end;
        direction: rtl;
      ">
            <div style="margin-right: 10%">
                <a class="limpiarFiltro">Eliminar Filtro
                    <img src="assets/icons/Eliminar.svg" class="tamanioFiltroIcono" /></a>
            </div>
        </div>
        <div name="filtros">
            <section class="mt-3">
                <div class="col2-row2">
                    <ng-multiselect-dropdown style="width: 100%; padding-left: 10px" [placeholder]="'Catálogo'"
                        id="filtroPermiso" [settings]="SettingsFiltroDePermisos" [data]="dropdownListFiltroPermisos"
                        [(ngModel)]="selectedItemsFiltroaPermisos"
                        (onSelect)="cambiarEtiquetaSeleccionadaGeneral('filtroPermiso')">
                    </ng-multiselect-dropdown>
                </div>
                <div class="col2-row2">
                    <ng-multiselect-dropdown style="width: 100%; padding-left: 10px" [placeholder]="'Acción'"
                        id="filtroPermiso" [settings]="SettingsFiltroDePermisos" [data]="dropdownListFiltroPermisos"
                        [(ngModel)]="selectedItemsFiltroaPermisos"
                        (onSelect)="cambiarEtiquetaSeleccionadaGeneral('filtroPermiso')">
                    </ng-multiselect-dropdown>
                </div>
                <div class="col2-row2">
                    <ng-multiselect-dropdown style="width: 100%; padding-left: 10px"
                        [placeholder]="'Correo electrónico'" id="filtroPermiso" [settings]="SettingsFiltroDePermisos"
                        [data]="dropdownListFiltroPermisos" [(ngModel)]="selectedItemsFiltroaPermisos"
                        (onSelect)="cambiarEtiquetaSeleccionadaGeneral('filtroPermiso')">
                    </ng-multiselect-dropdown>
                </div>
                <div class="col2-row2">
                    <input style="width: 95%; padding-left: 10px" type="date" placeholder="dd-MM-yyyy"
                        onfocus="(this.type='date')" formControlName="fechaFiltrar" id="fechaFiltrar"
                        name="fechaFiltrar" [value]="maxDate" max="{{ maxDate| date:'yyyy-MM-dd'}}" />
                </div>
                <div class="col2-row2">
                    <button style="cursor: pointer">Buscar</button>
                </div>
            </section>
        </div>
    </div>
    <div class="row justify-content-center" *ngIf="AUDGENUSUARIOS$ | async as AUDGENUSUARIOS">
        <div class="d-flex col-md-12 col-sm-12 col-xs-12 col-lg-12 col-xl-12 justify-content-center">
            <div class="card-lista-design-general" style="overflow-x: auto">
                <table class="table listado-design-general">
                    <tr>
                        <th style="padding-left: 40px; max-width: 300px">Catalogo</th>
                        <th style="padding-left: 40px; max-width: 300px">Usuario</th>
                        <th style="padding-left: 40px; max-width: 150px">Fecha</th>
                        <th style="padding-left: 40px; max-width: 150px">Acción</th>
                        <th style="padding-left: 40px; max-width: 150px"> </th>
                    </tr>
                    <tr *ngFor="let AUDGENUSUARIO of AUDGENUSUARIOS">
                        <td style="padding-left: 40px; max-width: 300px">{{AUDGENUSUARIO.CATALOGOS.DESCRIPCION}}
                        </td>
                        <td style="padding-left: 40px; max-width: 300px">{{AUDGENUSUARIO.USUARIO.NOMBRE}}
                            {{AUDGENUSUARIO.USUARIO.APELLIDO_PATERNO}}
                        </td>
                        <td style="padding-left: 40px; max-width: 150px">{{AUDGENUSUARIO.FECHA | date :'dd/MM/yyyy'}}
                            {{AUDGENUSUARIO.FECHA | date:'mediumTime'}}
                        </td>
                        <td style="padding-left: 40px; max-width: 150px">{{AUDGENUSUARIO.CATALOGOS.ACCION}}
                        </td>
                        <td style="width: 200px">
                            <img style="cursor: pointer" class="detalle-icon"
                                (click)="openModal(content, AUDGENUSUARIO)" />
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</section>
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
            <div>Detalle de los cambios</div>
        </h4>
        <button type="button" aria-label="Close" (click)="modal.dismiss()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <p class="titulo">Campo</p>
                    <div *ngFor="let item of itemsValor">
                        {{item}}
                    </div>
                </div>
                <div class="col-sm">
                    <p class="titulo">Antes</p>
                    <div *ngFor="let item of itemsAntes">
                        {{item}}
                    </div>
                </div>
                <div class="col-sm">
                    <p class="titulo">Después</p>
                    <div *ngFor="let item of itemsDespues">
                        {{item}}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn bottonCerrarModal" data-dismiss="modal" (click)="modal.close()">
            Cerrar
        </button>
    </div>
</ng-template>